input â† â€¢FLines"7.in"
W â† ((âŠ¢-Ëœ+`Ã—Â¬)' '=âŠ¢)âŠ¸âŠ”
St â† âŠ£â‰¡â‰ âŠ¸â†‘ # ğ•© starts with ğ•¨
Cd â† {
  dğ•Š"..": {0=â‰ ğ•© ? "/" ; ğ•©} {ğ•©/ËœÂ¬âˆ¨`(â‰ ğ•©)â†‘/â¼â‹ˆÂ¯1âŠ‘/'/'=ğ•©} d;
  dğ•Š"/": "/"; â‹„ "/"ğ•Štgt: "/"âˆ¾tgt; # these cases are not needed, but make the output prettier
  dğ•Štgt: âˆ¾dâ€¿"/"â€¿tgt
}

# walk through the file system, parse file sizes. directories are marked with size 0
dir â† ""
fs â† ((2Ã—"$ ls"âŠ¸St)+"$ cd "âŠ¸St)â—¶({szâ€¿f: (â€¢BQNâŠ0 sz)â€¿dirâ€¿f}W)â€¿{dir â†© (dir Cd Â¯1âŠ‘Wğ•©)}â€¿âŸ¨âŸ¨âŸ©âŸ© Â¨input
fs â†© fsâŠ”Ëœ(âŠ¢Ã—Â·+`1=-âŸœÂ») 2â‰¤â‰¡Â¨fs
dirs â† â·âŠ‘fs
contents â† âˆ˜â€¿3âŠ¸â¥ŠÂ¨âˆ¾Â¨1â†“Â¨1â†“fs

DirSize â† {
  { ğ•Š0â€¿dâ€¿f: +Â´DirSize âŠ‘contentsâŠËœdirsâŠâ‹ˆd Cd f; # for directories, get the size recursively
    ğ•Šszâ€¿Â·â€¿Â·: sz
  }Ë˜ğ•©
}

# star 1
+Â´â‰¤âŸœ100000âŠ¸/szâ†+Â´âˆ˜DirSizeÂ¨contents

# star 2
âŠ‘âˆ§((30000000-70000000-âŠ‘sz)âŠ¸<âŠ¸/) sz
